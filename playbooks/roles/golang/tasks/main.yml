- name: Download the Go tarball
  get_url: url=https://storage.googleapis.com/golang/go1.6.2.linux-amd64.tar.gz
           dest=/tmp/go1.6.2.linux-amd64.tar.gz
           checksum=sha256:e40c36ae71756198478624ed1bb4ce17597b3c19d243f3f0899bb5740d56212a

- name: Register the current Go version (if any)
  command: /usr/local/go/bin/go version
  ignore_errors: yes
  register: go_version
  changed_when: false

- name: Extract the Go tarball if Go is not yet installed or not the desired version
  become: yes
  unarchive: src=/tmp/go1.6.2.linux-amd64.tar.gz
             dest=/usr/local
             copy=no

- name: "Create go directory"
  file: path={{ ansible_env.HOME }}/go/src/github.com state=directory mode=0755
